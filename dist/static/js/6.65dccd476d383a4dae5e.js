webpackJsonp([6],{"3cXf":function(t,a,e){t.exports={default:e("q1bu"),__esModule:!0}},"7biW":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("4YfN"),n=e.n(s),o=e("3cXf"),i=e.n(o),c=e("zP4k"),l=e("6c3B"),r=e("2bvH"),u={name:"Search",components:{Head:c.a,Foot:l.a},data:function(){return{val:"",list:[],local:[],getLocal:[],prop:{},bSys:!0,bSys2:""}},methods:{fnLocal:function(t){if(console.log(t),this.local.length>0)for(var a=0;a<this.local.length;a++)if(this.local[a].name==t.name)return!1;this.local.push(t),localStorage.setItem("placeHistory",i()(this.local)),console.log(t.name),this.$store.commit("place",t.name),this.$router.push({path:"/home"})},fnSearch:function(){var t=this;this.axios.get("http://elm.cangdu.org/v1/pois?type=search&city_id="+this.search.id+"&keyword="+this.val).then(function(a){console.log(a.data),a.data.length>0&&(t.list=a.data)}),this.bSys=!1},fnClear:function(){localStorage.removeItem("placeHistory"),this.local=[],this.getLocal="",this.bSys2=""}},mounted:function(){var t=this;console.log(this.search),this.axios.get("http://elm.cangdu.org/v1/cities/"+this.$route.params.id).then(function(a){console.log(a.data),t.prop=a.data});var a=localStorage.getItem("placeHistory");console.log(a),a&&(this.bSys2=!0,this.getLocal=JSON.parse(a))},computed:n()({},Object(r.b)(["search"]))},h={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"search"}},[e("Head",{attrs:{goBack:"〈",headTitle:this.search.name}}),t._v(" "),e("div",{attrs:{id:"cont"}},[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"inp",attrs:{type:"text",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.val},on:{input:function(a){a.target.composing||(t.val=a.target.value)}}}),t._v(" "),e("input",{staticClass:"btn",attrs:{type:"button",value:"提交"},on:{click:function(a){return t.fnSearch()}}})]),t._v(" "),t.bSys?e("div",[e("p",{staticClass:"history"},[t._v("搜索历史")]),t._v(" "),e("ul",t._l(t.getLocal,function(a,s){return e("li",{key:s,staticClass:"search_list",on:{click:function(e){return t.fnLocal(a)}}},[e("p",{staticClass:"p1"},[t._v(t._s(a.name))]),t._v(" "),e("p",{staticClass:"p2"},[t._v(t._s(a.address))])])}),0),t._v(" "),t.bSys2?e("div",{staticClass:"clear",on:{click:function(a){return t.fnClear()}}},[t._v("清空所有")]):t._e()]):e("ul",t._l(t.list,function(a,s){return e("li",{key:s,staticClass:"search_list",on:{click:function(e){return t.fnLocal(a)}}},[e("p",{staticClass:"p1"},[t._v(t._s(a.name))]),t._v(" "),e("p",{staticClass:"p2"},[t._v(t._s(a.address))])])}),0)]),t._v(" "),e("Foot")],1)},staticRenderFns:[]};var p=e("C7Lr")(u,h,!1,function(t){e("aHyL")},"data-v-ca1ad8b0",null);a.default=p.exports},aHyL:function(t,a){},q1bu:function(t,a,e){var s=e("Rv9F"),n=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}});